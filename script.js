// NewsAPI Key
const apiKey = 'b212cc34a0928ccc90246f597ab998d9'; 
const url = 'https://newsapi.org/v2/everything?';

let currentQuery ="sports"
    let currentPage = 1;
    const fetchNews = async (page, q) => {
      console.log(`Fetching news for ${q}, page number ${page}...`);
      var url = 'https://newsapi.org/v2/everything?' +
        'q=' +q+
        '&from=2024-09-24&' +
        'pageSize=20&' +
        'language=en&' +
        'page=' + page +
        '&sortBy=popularity&' +
        'apiKey=c9c2b4234b6146b0bcaec95f876639d5';

      var req = new Request(url);

      let a = await fetch(req);
      let response = await a.json(); 
   //let response = { "status": "ok", "totalResults": 156, "articles": [{ "source": { "id": null, "name": "Hipertextual" }, "author": "Luis Miranda", "title": "Apple revela cuánto espacio necesita tu iPhone para Apple Intelligence", "description": "Apple Intelligence está por debutar en algunos países. Si bien la inteligencia artificial de Apple no estará disponible en Europa o en idioma español antes de que concluya el 2024, el gigante tecnológico dio a conocer los requerimientos de memoria interna que…", "url": "http://hipertextual.com/2024/09/apple-intelligence-espacio-almacenamiento-iphone-16", "urlToImage": "https://imgs.hipertextual.com/wp-content/uploads/2024/09/Apple-iPhone-16-Apple-Intelligence-240909-scaled.jpg", "publishedAt": "2024-09-24T00:44:09Z", "content": "Apple Intelligence está por debutar en algunos países. Si bien la inteligencia artificial de Apple no estará disponible en Europa o en idioma español antes de que concluya el 2024, el gigante tecnoló… [+1648 chars]" }, { "source": { "id": null, "name": "BBC News" }, "author": null, "title": "Widower's battle for wedding photos on wife's phone", "description": "A man whose wife died suddenly cannot recover precious photos of their wedding from her phone.", "url": "https://www.bbc.com/news/articles/cwyegzpx45xo", "urlToImage": "https://ichef.bbci.co.uk/news/1024/branded_news/1b43/live/c97cd630-79e8-11ef-98f5-c32ebf0655b2.jpg", "publishedAt": "2024-09-24T05:08:32Z", "content": "Martyn and Lynn Hall moved to Anglesey last year\r\nA man whose wife died suddenly is unable to recover precious photos of their wedding from her phone in time for her funeral.\r\nMartyn Hall cannot acce… [+3925 chars]" }, { "source": { "id": "time", "name": "Time" }, "author": "Chantelle Lee and Rebecca Schneid", "title": "How Public and Private Sector Leaders Are Tackling Climate Equity", "description": "EPA Administrator Michael S. Regan, RISE St. James CEO Sharon Lavigne, and Apple executive Lisa Jackson spoke during a panel at the TIME100 Climate Leadership Forum.", "url": "https://time.com/7022333/climate-leadership-forum-equity/", "urlToImage": "https://api.time.com/wp-content/uploads/2024/09/time-climate-leadership-forum-2024-005.jpg?quality=85&w=1200&h=628&crop=1", "publishedAt": "2024-09-24T04:30:00Z", "content": "Sharon Lavigne knows first-hand the effects of climate change. At the inaugural TIME100 Climate Leadership Forum in New York City on Monday, the founder, director, and CEO of the faith-based grassroo… [+3296 chars]" }, { "source": { "id": null, "name": "9to5Mac" }, "author": "Chance Miller", "title": "Apple is redesigning the Mac mini: Here’s everything we know", "description": "Apple will kick off the Mac’s transition to the M4 chips next month, and one of the headlining updates will be the Mac mini. With an all-new design, two different M4 variations, and more, here’s everything we know so far about the new Mac mini coming soon.\n\n\n…", "url": "https://9to5mac.com/2024/09/23/new-mac-mini-redesign-features/", "urlToImage": "https://i0.wp.com/9to5mac.com/wp-content/uploads/sites/6/2023/03/Mac-mini-M2-Pro-Review-2.jpg?resize=1200%2C628&quality=82&strip=all&ssl=1", "publishedAt": "2024-09-24T00:23:09Z", "content": "Apple will kick off the Macs transition to the M4 chips next month, and one of the headlining updates will be the Mac mini. With an all-new design, two different M4 variations, and more, heres everyt… [+3555 chars]" }, { "source": { "id": null, "name": "9to5Mac" }, "author": "Filipe Espósito", "title": "Apple is making it easier for Mac users to enable Low Power Mode with macOS 15.1", "description": "Low Power Mode is a feature that has been on the iPhone for years and lets users save battery life with the press of a button. This option was expanded to the Mac with macOS Monterey, but Apple has always kept it hidden in the System Settings. But with macOS …", "url": "https://9to5mac.com/2024/09/23/apple-is-making-it-easier-for-mac-users-to-enable-low-power-mode-with-macos-15-1/", "urlToImage": "https://i0.wp.com/9to5mac.com/wp-content/uploads/sites/6/2024/01/see-macbook-battery-health.jpeg?resize=1200%2C628&quality=82&strip=all&ssl=1", "publishedAt": "2024-09-24T01:06:35Z", "content": "Low Power Mode is a feature that has been on the iPhone for years and lets users save battery life with the press of a button. This option was expanded to the Mac with macOS Monterey, but Apple has a… [+1490 chars]" }, { "source": { "id": null, "name": "9to5Mac" }, "author": "Chance Miller", "title": "iOS 18: Three new features you probably don’t know about", "description": "iOS 18 was officially released to the public last week, but we’re still learning more about all of the new features and changes. Here are a few additional tidbits on improvements to FaceTime, changes to the Wallet app, and more.\n\n\n\n more…", "url": "https://9to5mac.com/2024/09/23/ios-18-three-new-features-hidden/", "urlToImage": "https://i0.wp.com/9to5mac.com/wp-content/uploads/sites/6/2024/06/iOS-18-Top-Features-01.jpg?resize=1200%2C628&quality=82&strip=all&ssl=1", "publishedAt": "2024-09-24T00:41:45Z", "content": "iOS 18 was officially released to the public last week, but were still learning more about all of the new features and changes. Here are a few additional tidbits on improvements to FaceTime, changes … [+1349 chars]" }, { "source": { "id": null, "name": "AppleInsider" }, "author": "news@appleinsider.com (Chip Loder)", "title": "How to use Disk Jockey for retro emulation on your Mac", "description": "Disk Jockey is an app that allows you to create disk image files for a variety of retro computers and emulators. Here's how to use it.Disk Jockey is a retro disk image formatter.Retro computing is popular these days, and one aspect of vintage computing is man…", "url": "https://appleinsider.com/inside/macos/tips/how-to-use-disk-jockey-for-retro-emulation-on-your-mac", "urlToImage": "https://photos5.appleinsider.com/gallery/60761-125819-zip100-xl.jpg", "publishedAt": "2024-09-24T03:05:10Z", "content": "Disk Jockey is an app that allows you to create disk image files for a variety of retro computers and emulators. Here's how to use it.\r\nRetro computing is popular these days, and one aspect of vintag… [+9048 chars]" }, { "source": { "id": null, "name": "Jobsolv.com" }, "author": null, "title": "Bootstrapped to 10K Users: Is B2B the Only Way to Monetize?", "description": "All-In-One Platform. With just one click, Jobsolv matches you with over $100K in remote employment, customizes your CV, and lets you apply automatically. Start speeding up your search now!", "url": "https://www.jobsolv.com/", "urlToImage": "https://assets-global.website-files.com/646ea5cf9a947b6271e0bfb5/65d2f8c387bd4671f48d319f_hero.png", "publishedAt": "2024-09-24T02:34:07Z", "content": "Exclusive high-paying remote and hybrid job listings are refreshed daily. Jobsolv scouts the web for the freshest job postings, giving you a first-mover advantage against other job seekers. Our syste… [+229 chars]" }, { "source": { "id": null, "name": "Android Authority" }, "author": "Calvin Wankhede", "title": "How safe are Google Pay, Apple Pay, and other payment apps on your phone?", "description": "Apps like Google Pay and Apple Pay allow you to tap your phone to make contactless payments but are they safe or should you avoid them?", "url": "https://www.androidauthority.com/is-google-pay-apple-pay-safe-3484366/", "urlToImage": "https://www.androidauthority.com/wp-content/uploads/2020/07/apple-watch-series-5-apple-pay.jpg", "publishedAt": "2024-09-24T01:33:03Z", "content": "Thanks to Google Pay and Apple Pay, you can now use your smartphone or watch to pay at retail stores instead of your physical credit card. This may seem tempting for the single reason that you can le… [+5931 chars]" }, { "source": { "id": null, "name": "Phandroid - News for Android" }, "author": "Nick Gray", "title": "Best Smartphones of 2024 (September): A Year of Innovation", "description": "2024 has been a remarkable year for smartphone technology, with some truly groundbreaking devices hitting the market. From sleek new designs to cutting-edge performance and camera capabilities, this year has seen a surge in innovation. If you want the ultimat…", "url": "https://phandroid.com/2024/09/23/best-smartphones-of-2024-september-a-year-of-innovation/", "urlToImage": "https://phandroid.com/wp-content/uploads/2024/09/smartphones-best.jpg", "publishedAt": "2024-09-24T01:50:51Z", "content": "2024 has been a remarkable year for smartphone technology, with some truly groundbreaking devices hitting the market. From sleek new designs to cutting-edge performance and camera capabilities, this … [+6411 chars]" }, { "source": { "id": null, "name": "La Vanguardia" }, "author": "Sergio J. Ortiz", "title": "El Apple Watch Ultra está 300 euros más barato que el Apple Watch Ultra 2 y no tienen tantas diferencias", "description": "¿Estás considerando la posibilidad de comprar un smartwatch en 2024? En ese caso te interesa, y mucho, la oferta de Apple Watch Ultra que vamos a compartir en el día de hoy. Se trata de un Apple Watch Ultra de primera generación y está mucho más barato de lo …", "url": "https://www.lavanguardia.com/andro4all/ofertas/el-apple-watch-ultra-esta-300-euros-mas-barato-que-el-apple-watch-ultra-2-y-no-tienen-tantas-diferencias", "urlToImage": "https://www.lavanguardia.com/andro4all/hero/2024/09/apple-watch-ultra-oferta-559-euros.1727104776.5401.jpeg?width=1200", "publishedAt": "2024-09-24T02:30:27Z", "content": "El Apple Watch Ultra es un reloj muy resistente\r\n¿Estás considerando la posibilidad de comprar un smartwatch en 2024? En ese caso te interesa, y mucho, la oferta de Apple Watch Ultra que vamos a comp… [+3455 chars]" }, { "source": { "id": null, "name": "Iphoneitalia.com" }, "author": "Giuseppe Migliorino", "title": "Apple blocca le firme di iOS 17.6.1", "description": "Apple ha deciso di interrompere le firme di iOS 17.6.1, impedendo agli utenti di poter eseguire il downgrade.\nLink all'articolo originale: Apple blocca le firme di iOS 17.6.1", "url": "https://www.iphoneitalia.com/830392/apple-blocca-le-firme-di-ios-17-6-1", "urlToImage": "https://static.iphoneitalia.com/wp-content/uploads/2024/08/iOS-17.6.1-Feature.jpg", "publishedAt": "2024-09-24T05:00:04Z", "content": "Apple ha deciso di interrompere le firme di iOS 17.6.1, impedendo agli utenti di poter eseguire il downgrade o il ripristino a quella specifica versione del firmware. Ora, infatti, si può solo aggior… [+621 chars]" }, { "source": { "id": "time", "name": "Time" }, "author": "Rebecca Schneid and Chantelle Lee", "title": "The Biggest Moments From the TIME100 Climate Leadership Forum", "description": "TIME convened the first-ever TIME100 Climate Leadership Forum, featuring a series of conversations focused on driving real change toward a better, more sustainable world.", "url": "https://time.com/7022337/climate-leadership-forum-biggest-moments/", "urlToImage": "https://api.time.com/wp-content/uploads/2024/09/time-climate-leadership-forum-2024-006.jpg?quality=85&w=1200&h=628&crop=1", "publishedAt": "2024-09-24T03:55:00Z", "content": "Climate leaders from various fields gathered for the inaugural TIME100 Climate Leadership Forum in New York City on Monday to discuss how icons, politicians, activists, policymakers, and business lea… [+5244 chars]" }, { "source": { "id": null, "name": "HYPEBEAST" }, "author": "info@hypebeast.com (Hypebeast)", "title": "Porsche Design's 911 Soundbar 2.0 Pro to Restock?", "description": "While it made its official debut last year, Porsche Design's 911 Soundbar 2.0 Pro, is making noise once again, with a post by Porsche Singapore indicating a possible restock or purchase availability.The limited-edition audio system is made from the original e…", "url": "https://hypebeast.com/2024/9/porsche-design-911-soundbar-2-pro-restock-info", "urlToImage": "https://image-cdn.hypb.st/https%3A%2F%2Fhypebeast.com%2Fimage%2F2024%2F09%2F24%2Fporsche-design-911-soundbar-2-pro-restock-info-000.jpg?w=1080&cbr=1&q=90&fit=max", "publishedAt": "2024-09-24T04:46:06Z", "content": "While it made its official debut last year, Porsche Design‘s 911 Soundbar 2.0 Pro, is making noise once again, with a post by Porsche Singapore indicating a possible restock or purchase availability.… [+1349 chars]" }, { "source": { "id": null, "name": "3dnews.ru" }, "author": null, "title": "Защитное покрытие Ceramic Shield в iPhone 16 не панацея, чехол всё ещё нужен", "description": "Компания Apple заявляет, что модели iPhone 16 стали прочнее благодаря усовершенствованному покрытию Ceramic Shield, защищающему телефон. Однако тесты на падение, проведённые страховой компанией Allstate, показывают, что Ceramic Shield не делает iPhone 16 таки…", "url": "https://3dnews.ru/1111413/zashchitnoe-pokritie-ceramic-shield-v-iphone-16-ne-panatseya-chehol-vsyo-eshchyo-nugen", "urlToImage": "https://3dnews.ru/assets/external/illustrations/2024/09/24/1111413/apple-iphone-16-5643.jpg", "publishedAt": "2024-09-24T01:29:00Z", "content": "Apple , iPhone 16 Ceramic Shield, . , Allstate, , Ceramic Shield iPhone 16 .\r\n: Apple\r\nAllstate iPhone 16 Pro Max 1,8 . , , , .\r\n, iPhone 16 Pro Max . « iPhone 16 , , , », — Allstate.\r\n , , Apple iPh… [+190 chars]" }, { "source": { "id": null, "name": "heise online" }, "author": "Andreas Knobloch", "title": "Dienstag: Telegram will Nutzerdaten herausgeben, iOS-Upgrade verursacht Ärger", "description": "Telegram-Chef lenkt ein + Probleme mit dem iOS18 für iPhones + Todesstoß für WSUS + FBI schaltet riesiges Botnet ab + Huawei mit neuem PC-Betriebssystem", "url": "https://www.heise.de/news/Dienstag-Telegram-will-Nutzerdaten-herausgeben-iOS-Upgrade-verursacht-Aerger-9949782.html", "urlToImage": "https://heise.cloudimg.io/bound/1200x1200/q85.png-lossy-85.webp-lossy-85.foil1/_www-heise-de_/imgs/18/4/6/7/4/7/6/3/Wochentage-source-sans-5a51e5cd987bc104.png", "publishedAt": "2024-09-24T04:15:00Z", "content": "Nach der Verhaftung von Telegram-CEO Pawel Durow in Frankreich geht der Kommunikationsdienst auf die Behörden zu. Auf juristische Anfragen hin will Telegram künftig die IP-Adressen und Telefonnummern… [+3484 chars]" }, { "source": { "id": null, "name": "La Vanguardia" }, "author": "Sergio J. Ortiz", "title": "Este es el iPhone con mejor relación calidad-precio de 2024 y está de oferta", "description": "La llegada al mercado de los modelos iPhone 16 Pro y iPhone 16 Pro Max ha revolucionado por completo el catálogo de productos de Apple. Muchos modelos de iPhone de generaciones anteriores han rebajado su precio, convirtiéndose así en una opción de compra alta…", "url": "https://www.lavanguardia.com/andro4all/ofertas/este-es-el-iphone-con-mejor-relacion-calidad-precio-de-2024-y-esta-de-oferta", "urlToImage": "https://www.lavanguardia.com/andro4all/hero/2024/09/iphone-14-azul-portada.jpg?width=1200", "publishedAt": "2024-09-24T03:30:16Z", "content": "El iPhone 14 está disponible por un precio mucho más barato\r\nLa llegada al mercado de los modelos iPhone 16 Pro y iPhone 16 Pro Max ha revolucionado por completo el catálogo de productos de Apple. Mu… [+3454 chars]" }, { "source": { "id": null, "name": "Tinhte.vn" }, "author": "no-reply@tinhte.vn (Anh Tú.), Anh Tú.", "title": "Apple phát hành iOS 18.1 dev beta 5: thêm tuỳ chọn cho nút Camera Control", "description": "Apple đang tăng tốc hoàn thiện Apple Intelligence, bộ tính năng trí khôn AI mới của họ, thông qua các bản beta dành cho nhà phát triển. Bản thử nghiệm thứ 5 của iOS 18.1, iPadOS 18.1 và macOS Sequoia 15.1, cùng bản thứ 2 của visionOS 2.1, tvOS 18.", "url": "https://tinhte.vn/thread/apple-phat-hanh-ios-18-1-dev-beta-5-them-tuy-chon-cho-nut-camera-control.3830466/", "urlToImage": "https://photo2.tinhte.vn/data/attachment-files/2024/09/8460790_uegueg.jpg", "publishedAt": "2024-09-24T01:25:57Z", "content": "Phiên bn iOS 18.1 chính thc có th c ra mt trong tháng 10 vi nhng mu iPhone có h tr. Nu anh em hi mình có nên lên iOS 18.1 dev beta 5 hay không, thì câu tr li ca mình là có, vì hin ti mình thy nó ang … [+211 chars]" }, { "source": { "id": null, "name": "Tinhte.vn" }, "author": "no-reply@tinhte.vn (Cáo - Foxtek), Cáo - Foxtek", "title": "iOS 18 được bổ sung tính năng quay số nhanh bàn phím T9", "description": "Trong phiên bản iOS 18, Apple đã bổ sung chức năng quay số nhanh bàn phím T9 cho iPhone. Tính năng này giúp người dùng có thể tìm kiếm và gọi nhanh một số điện thoại được lưu trong danh bạ\nApple bổ sung tính năng quay số nhanh T9 trên iOS 18\nThực tế…", "url": "https://tinhte.vn/thread/ios-18-duoc-bo-sung-tinh-nang-quay-so-nhanh-ban-phim-t9.3828379/", "urlToImage": "https://photo2.tinhte.vn/data/attachment-files/2024/09/8455609_8455459-AT9DIAHH.jpg", "publishedAt": "2024-09-24T00:03:57Z", "content": "Theo nhn xét t tác gi trang 9to5Mac, vic quay s nhanh bàn phím T9 trên iOS 18 s phn nào làm hài lòng nhiu ngi dùng vn ã quen vi tính nng này trên các thit b Android hay các in thoi ph thông trc ây.Nh… [+943 chars]" }, { "source": { "id": null, "name": "Frandroid" }, "author": "Benjamin Barois", "title": "À peine arrivé sur le marché, l’iPhone 16 profite des French Days pour afficher une belle petite réduction", "description": "L'iPhone 16 est disponible pour tout le monde depuis le 20 septembre 2024. Pile pour le début des French Days, qui ne l'épargne pas puisqu'il est disponible avec une petite promotion de 8 % qui est toujours bonne à prendre.", "url": "https://www.frandroid.com/bons-plans/2346366_a-peine-arrive-sur-le-marche-liphone-16-profite-des-french-days-pour-afficher-une-belle-petite-reduction", "urlToImage": "https://images.frandroid.com/wp-content/uploads/2024/09/iphone-16-french-days.jpg", "publishedAt": "2024-09-24T05:10:00Z", "content": "L’iPhone 16 est disponible pour tout le monde depuis le 20 septembre 2024. Pile pour le début des French Days, qui ne l’épargne pas puisqu’il est disponible avec une petite promotion de 8 % qui est t… [+5444 chars]" }] } 
      
    let str = ""
      resultCount.innerHTML = response.totalResults
      for (let item of response.articles) {
        if (item.urlToImage && item.title && item.description) {

        str = str + `<div class="card" style="width: 18rem;">
          <img src="${item.urlToImage}" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title">${item.title.slice(0, 23)}...</h5>
            <p class="card-text">${item.description.slice(0, 123)}...</p>
          <a href="${item.url}" target="_blank" class="btn btn-info">Read Article</a>
          </div>
        </div>`
      }
      document.querySelector(".content").innerHTML = str
    }
  }
    
    fetchNews(1, currentQuery) 
    search.addEventListener("click", (e)=>{
      e.preventDefault()
      let query = searchInput.value;
      currentQuery = query
      fetchNews(1,  query)
    })
    prev.addEventListener("click", (e)=>{
      e.preventDefault()
      if(currentPage>1){

        currentPage = currentPage - 1
        fetchNews(currentPage,  currentQuery)
      

      }
      
    });
    next.addEventListener("click", (e)=>{
      e.preventDefault()
      currentPage = currentPage + 1
      fetchNews(currentPage,  currentQuery)

    });

    
const userInput = (event) => {
  event.preventDefault();
  const category = event.target.getAttribute('data-category');
  searchInput.value = category;  
  currentQuery = category;  
  fetchNews(1, currentQuery);  
};


document.querySelectorAll('.category-btn').forEach((button) => {
  button.addEventListener('click', userInput);
}); 
